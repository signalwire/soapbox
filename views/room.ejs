<div class="row">
  <div class="col">
    <h2><%= displayName %></h2>
  </div>
</div>

<div class="row">
  <div class="col">
    <div id="videoRoot"></div>
  </div>
</div>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <form class="container-fluid justify-content-start">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <button type="button" id="toggleMute" onclick="toggleMuteFn()" class="btn btn-primary text-nowrap">Mute</button>
    <button type="button" id="toggleVideoMute" onclick="toggleVideoMuteFn()" class="btn btn-info text-nowrap">Stop Video</button>
    <button type="button" id="hangupBtn" onclick="hangupCall()" class="btn btn-danger text-nowrap">Hangup</button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <button type="button" class="btn btn-secondary text-nowrap" data-bs-toggle="modal" data-bs-target="#deviceModal">Devices</button>
      <button type="button" id="startSharing" onclick="startSharing()" class="btn btn-success text-nowrap">Screen Share</button>
      <button type="button" id="stopSharing" onclick="stopSharing()" class="btn btn-danger text-nowrap" style="display: none;">Stop Sharing</button>
      <select id="layoutPicker" class="form-select mx-2" onchange="setLayout()"></select>
      <a href="<%= roomUrl %>" target="_blank" class="btn btn-success text-nowrap me-1">Host URL</a>
      <a href="<%= participantUrl %>" target="_blank" class="btn btn-secondary text-nowrap">Participant URL</a>
    </div>
  </form>
</nav>

<div class="row">
  <div class="col">
    <div class="d-flex flex-wrap" id="participantList">
    </div>
  </div>
</div>

<template id="participantTpl">
  <div class="participant text-center mx-1 p-1">
    <div><img class="participantAvatar" width="40" height="40"></div>
    <div class="participantName flex-grow-1"></div>
  </div>
</template>

<%- include('partials/controls_modal') %>

<script type="text/javascript" src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
<script src="https://unpkg.com/@signalwire/js@dev"></script>
<script>
  var TOKEN = "<%= token %>";
  var USER = "<%= user %>";
</script>
<script src="/utility.js"></script>
<script src="/room.js"></script>